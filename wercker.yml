box: python:3.6
build:
  steps:
    - internal/docker-build:
        dockerfile: Dockerfile
        image-name: octobot
        build-args: "OCTOBOT_BRANCH=$WERCKER_GIT_BRANCH OCTOBOT_REPOSITORY=https://$WERCKER_GIT_DOMAIN/$WERCKER_GIT_OWNER/$WERCKER_GIT_REPOSITORY"
    - internal/docker-run:
        image: octobot
        name: octobot

deploy-latest:
  steps:
    - internal/docker-push:
        username: $USERNAME
        password: $PASSWORD
        tag: latest
        repository: herklos/octobot
